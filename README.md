# cnn
[![Review Assignment Due Date](https://classroom.github.com/assets/deadline-readme-button-24ddc0f5d75046c5622901739e7c5dd533143b0c8e959d652212380cedb1ea36.svg)](https://classroom.github.com/a/OX5pGmWo)
# コンピュータネットワークレポート
* 学籍番号：2264903
* 氏名：Liu Jie
* 所属：情報工学EP


# 課題の説明
3つのプログラムを提出し、README.mdを作成する。

## 課題1
### クライアントとサーバーのデータの送受信
* ソースファイル：J13_1Client.java, J13_1Server.java
### プログラムの説明
* クライアントとサーバーのデータの送受信する機能を持つプログラム
* J13_1Client.java：  
まず、`Scanner`クラスのインスタンスを生成し、２つの整数をキーボードから入力されるように`int`型変数に代入する。コマンド引数で入力したサーバーとポートを取得する。次に、`Socket`クラスのインスタンスを生成し、ソケットを作成する。`DataOutputStream`クラスのインスタンスを生成し、`writeInt()`メソッドを用いてサーバーにキーボードから入力したデータを送信する。最後に、`DataInputStream`クラスのインスタンスを生成し、サーバーで計算された結果を受け取りコンソールに出力する。ソケットとスキャンナをクローズする。
* J13_1Server.java：  
まず、コマンド引数からポートを取得し、`int`型変数に代入する。`ServerSocket`クラスのインスタンスを生成し、サーバーソケットを作成する。次に、無限ループでは、`accept()`メソッドを用いて、クライアントからの要求を受け取る。`DataInputStream`クラスのインスタンスを生成し、`readInt()`メソッドを用いてクライアントから整数を読み取る。`DataOutputStream`クラスのインスタンスを生成し、`writeInt()`メソッドを用いて足し算した結果をクライアントに送信する。また、クライアントから受け取った値と結果をコンソールに出力する。最後に、ソケットをクローズする。
### 実行結果
* クライアント：  
![image](https://github.com/2023-ynu-programming-II/assignment13-liu-jie-903/assets/147288297/a08bb5c7-341c-4a78-a512-0bebf0c6a93a)
* サーバー：  
![image](https://github.com/2023-ynu-programming-II/assignment13-liu-jie-903/assets/147288297/28554ca1-5ce2-434a-92a4-73b3125ba0ec)
### 考察
* J13_1Server.javaにおけるクライアントから受け取った値で得た結果と、J13_1Client.javaにおけるサーバーで計算された結果が揃えていることを確認した。

## 課題2
### クライアントとサーバーのデータの送受信
* ソースファイル：J13_2.java
### プログラムの説明
* 課題1のクライアント部分をGUIで表示するプログラム
* Swingのウィンドウフレームを表すため、`J13_2`クラスは`JFrame`を拡張する。整数を入力するため2つの`JTextField`と、サーバーに値を送信するボタン`JButton`、サーバーから受け取った計算結果を出力するための`JLabel`、ホスト名とポート番号を表す変数を宣言する。
* `J13_2`コンストラクタは、タイトルの指定とコマンド引数の受け取りの2つ変数を持つ。`JPanel`クラスのインスタンスを生成しする。レイアウトとして、`setPreferredSize()`メソッドと`Dimension()`メソッドを用いてラベルのサイズを定義し、`setHorizontalAlignment()`メソッドでラベルの位置を中央揃えに設定する。サーバーに値を送信するボタンは`sendToServer()`メソッドを呼び出す。そして、パネルに2つの整数とラベル、ボタンを追加し、パネル自身をフレーム追加する。フレームサイズを設定し、可視化にする。
* `sendToServer()`メソッドは、課題1のクライアントがキーボードから入力する機能を除く部分である。キーボードから入力の代わりに、`getText()`メソッドを用いて`JTextField`からデータを取得する。`main()`メソッドでフレームのタイトルを指定し、コマンド引数を代入する。
### 実行結果
* クライアントウィンドウ：  
![image](https://github.com/2023-ynu-programming-II/assignment13-liu-jie-903/assets/147288297/88d27376-7442-4dd3-b9b4-10be44c75116)
* サーバー： 
![screenshort2_2](https://github.com/2023-ynu-programming-II/assignment13-liu-jie-903/assets/147288297/ad0a3e2d-2475-48c3-8179-9601fc491e9a)
### 考察
* サーバJ13_1Server.javaにおけるクライアントから受け取った値で得た結果は、クライアントJ13_2.javaで正確的に出力されることを確認した。
  
## 課題3
### 都道府県の人口データの送受信
* ソースファイル：J13_3Client.java, J13_3Server.java
### プログラムの説明
* クライアントとサーバーの都道府県の人口データの送受信する機能を持つプログラム
* J13_3Client.java：   
まず、Swingのウィンドウフレームを表すため、`J13_3`クラスは`JFrame`を拡張する。入力と送信用のための`JTextField`1つと、受信結果の出力用のための`JTextField`1つ、サーバーに値を送信するボタン`JButton`、ホスト名とポート番号を表す変数を宣言する。  
次に、`J13_3`コンストラクタは、タイトルの指定とコマンド引数の受け取りの2つ変数を持つ。サーバーに値を送信するボタンは`sendToServer()`メソッドを呼び出す。そして、`JPanel`クラスのインスタンスを生成しする。`add()`メソッドでパネルに2つのテキストフィールドとラベル、ボタンを追加し、パネル自身をフレーム追加する。`setSize()`メソッドでフレームサイズを設定し、`setVisible()`メソッドで可視化にする。  
なお、`sendToServer()`メソッドは、`getText()`メソッドを用いて`JTextField`からデータキーを取得する。`Socket`クラスのインスタンスを生成し、ソケットを作成する。`ObjectOutputStream`クラスのインスタンスを生成し、`writeObject()`メソッドを用いてサーバーにキーボードから入力した探索キーを送信する。そして、`ObjectInputStream`クラスのインスタンスを生成し、サーバーでHashMapから取得したデータを受け取った後に、ソケットをクローズする。`main()`メソッドでフレームのタイトルを指定し、コマンド引数を代入する。
* J13_3Server.java：  
`Prefecture`クラスには、まず、`static final long serialVersionUID = バージョン番号`を付加する。
`J13_3Server`クラスには、まず、コマンド引数からポートを取得し、`int`型変数に代入する。`ServerSocket`クラスのインスタンスを生成し、サーバーソケットを作成する。都道府県の人口データを保持する`HashMap`オブジェクトを`prefectureMap()`メソッドでを作成し、`pm`変数に代入する。次に、無限ループでは、`accept()`メソッドを用いて、クライアントからの要求を受け取る。`ObjectInputStream`クラスのインスタンスを生成し、`readObject()`メソッドを用いてクライアントから探索キーを読み取る。探索結果を取得し、サーバーは`HashMap`から探索キーに該当するデータをクライアントに返し、見つからない場合は、`"該当なし",0`を返す。`ObjectOutputStream`クラスのインスタンスを生成し、`writeObject()`メソッドを用いて探索した結果をクライアントに送信する。また、クライアントから受け取った値をコンソールに出力する。最後に、ソケットをクローズする。
### 実行結果
* "kanagawa"を入力した場合：  
![image](https://github.com/2023-ynu-programming-II/assignment13-liu-jie-903/assets/147288297/aad86b07-5dee-48ac-b676-2e9ee935e8e5)
* "osaka"を入力した場合：  
![screenshort3_2](https://github.com/2023-ynu-programming-II/assignment13-liu-jie-903/assets/147288297/ba1f2138-d77b-4657-ad05-86f4613b2b0e)
* "okinawa"を入力した場合：  
![image](https://github.com/2023-ynu-programming-II/assignment13-liu-jie-903/assets/147288297/34dd05ca-10d3-43b3-aa4f-0614e735230f)
### 考察
* サーバJ13_3Server.javaにおけるクライアントから受け取った探索キーで得た都道府県の人口データの探索結果は正しくて、クライアントJ13_3Sever.javaで正確的に出力されることを確認した。
* このプログラムでは、クライアントとサーバーがHashMapを使用して都道府県の人口データをやり取りする仕組みが組まれている。動作原理と手順をより具体的に考察した。
1. サーバープログラム:  
まず、`ServerSocket`クラスを使用して指定されたポート番号で接続を待ち受けるサーバーが作成される。`prefectureMap()`メソッドで都道府県と人口のデータを持つHashMapが作成され、サーバーがこれを保持する。次に、サーバーはクライアントからの接続要求を待ち、接続が確立されると新しいソケットが作成される。クライアントから送られてきたキーを受け取り、HashMapを使用して対応する都道府県データを取得する。最後に、取得した都道府県データを`ObjectOutputStream()`メソッドを使用してクライアントに送信する。
2. クライアントプログラム:  
まず、`Socket`クラスを使用してサーバーに接続を要求する。クライアントはユーザーから入力された探索キーを取得し、入力された探索キーを`ObjectOutputStream()`メソッドを使用してサーバーに送信する。次に、サーバーからの応答を `ObjectInputStream()`メソッドを使用して受け取り、都道府県の人口データが格納された`Prefecture`オブジェクトとして受け取る。
3. HashMapの役割:  
サーバー側ではHashMapが都道府県の英語表記を元に、対応する都道府県の人口データを保持している。クライアントが探索キーをサーバーに送信すると、サーバーはHashMapを利用してそのキーに対応する都道府県データを取得する。このようにして、クライアントとサーバーはHashMapを通じてデータのやり取りを行い、通信が成立する。サーバーはHashMapを介して探索結果をクライアントに送信し、クライアントはそれを受け取って結果を表示される。

# 参考文献
* 演習のウェブサイト
* 「Swing のテキストフィールドとラベル」Java 入門
 https://www.javadrive.jp/tutorial/jlabel/index4.html, 2023/1/05

# 謝辞
* 特になし。

# 感想など
GUIを自分で作って、いろいろな機能を実現させた。このため、プログラミングの魅力をより実感した。
